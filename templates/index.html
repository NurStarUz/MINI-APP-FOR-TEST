<script>
    function startTest() {
        fetch('/test')
            .then(response => response.json())
            .then(data => {
                let testDiv = document.getElementById("test-container");
                testDiv.innerHTML = "";
                data.forEach(savol => {
                    let savolDiv = document.createElement("div");
                    savolDiv.innerHTML = `<p><b>${savol.savol}</b></p>`;
                    savol.variantlar.forEach(variant => {
                        let btn = document.createElement("button");
                        btn.innerText = variant;
                        btn.onclick = function() {
                            checkAnswer(savol.id, variant, savol.togri); // "to‘g‘ri" -> "togri"
                        };
                        savolDiv.appendChild(btn);
                    });
                    testDiv.appendChild(savolDiv);
                });
            })
            .catch(error => console.error('Xatolik:', error));
    }

    function checkAnswer(id, tanlangan, togri) {
        let message = tanlangan === togri ? "✅ To‘g‘ri!" : "❌ Noto‘g‘ri!";
        alert(message);
    }
</script>
